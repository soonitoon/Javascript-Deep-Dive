# 4장: 변수

## 4.1 변수란 무엇인가? 왜 필요한가?

```js
10 + 20
```

- 위의 코드를 실행할 때 어떤 일이 일어나는가?
- `10 + 20`은 **리터럴**이다.
- `+`는 **연산자**다.
- `10 + 20`은 **표현식**이다.
- `10`과 `20`을 임의의 메모리 공간에 저장한다.
- `10`과 `20`을 더하는 연산을 수행한 다음 그 결과를 임의의 메모리 공간에 저장한다.
- 하지만 계산 결과를 다시 불러올 수 없다.
- 자바스크립트는 메모리 주소를 통해 값을 저장하고 불러오는 것을 허용하지 않기 때문이다.
- 또한, 연산 결과를 저장할 메모리 주소는 코드를 실행할 때마다 항상 바뀌기 때문이다.
- 이러한 문제를 해결하기 위해 **변수**를 사용한다.
- 변수는 어떤 값을 저장하기 위한 메모리 공간 자체 또는 메모리 공간을 식별하기 위해 붙인 이름을 말한다.

```JS
var x = 10 + 20;
```

- 여기서 `x`는 **변수 이름**, `30`은 **변수 값**이다.
- 변수에 값을 저장하는 것을 **할당**이라고 한다.
- 변수에 저장된 값을 읽어오는 것을 **참조**라고 한다.

## 4.2 식별자

- 변수 이름을 식별자라고 한다.
- 식별자는 어떤 값을 구별해서 식별할 수 있는 고유한 이름을 말한다.
- 식별자는 메모리에 저장된 값을 불러올 수 있어야 한다.
- 따라서 식별자는 메모리 주소와 매핑 관계를 맺으며, 매핑 정보도 메모리에 저장되어야 한다.
- 이와 같은 식별자를 사용하기 위해서는 **선언**이 필요하다.

## 4.3 변수 선언

- 변수 선언은 변수를 생성하는 것이다.
- 이는 값을 저장하기 위한 메모리 공간을 확보하고, 변수 이름과 메모리 공간의 주소를 연결해서 값을 저장할 수 있게 준비하는 것이다.
- 이렇게 확보한 공간은 확보가 해제되기 전까지 누구도 사용할 수 없다.
- 자바스크립트 변수 선언에는 `var`, `let`, `const` 키워드를 사용한다.

```JS
var x;
```

- `var` 키워드는 변수 선언을 의미한다(키워드란 자바스크립트 엔진이 수행할 동작을 규정한 명령어다.).
- `x` 변수의 메모리 공간은 비어있지 않고, 자바스크립트가 자동으로 `undefined`라는 값을 할당한다.
- 자바스크립트의 변수 선언은 두 단계에 걸쳐 일어난다.
  1. **선언 단계**: 변수 이름을 등록해서 자바스크립트 엔진에 변수가 존재한다고 알린다.
  2. **초기화 단계**: 변수 이름에 메모리 공간을 확보하고, `undefined`를 할당한다.
- 초기화 단계가 없다면 변수를 선언하고 곧바로 사용할 때 이전 애플리케이션이 사용하던 쓰레기값이 남아있을 수 있다.
- 만약 선언되지 않은 변수를 참조하면 `ReferenceError`가 발생한다.

## 4.4 변수 선언의 실행 시점과 변수 호이스팅

```JS
console.log(score); // undefined
var score;
```

- 상식적으로 볼 때 `score` 변수는 선언되지 않았으므로 `ReferenceError`가 발생해야 한다.
- 하지만 `score` 변수는 첫 번째 줄부터 `undefined`로 초기화되어 있다.
- 이는 자바스크립트의 **변수 호이스팅**이라는 특성이다.
- 자바스크립트는 런타임 이전 소스코드 평가 과정에서 모든 형태의 선언문을 먼저 실행한다.
- 그리고 런타임에서 모든 선언문을 제거하고 남은 소스코드를 실행한다.

## 4.5 값의 할당

- 변수에 값을 할당할 때는 할당 연산자(`=`)를 사용함.
- 할당 연산자는 우변의 값을 좌변의 변수에 할당함.

```js
var score; // 변수 선언
score = 80; // 값 할당
```

- 선언과 할당을 한 문장으로 표현할 수도 있음.
- 자바스크립트 엔진은 한 문장으로 표현해도 두 문장으로 나누어 해석하기 때문에 정확히 똑같은 동작이 일어나게 됨.

```js
var score = 80;
```

- 하지만 선언과 할당의 시점은 다름.
- 선언은 런타임 이전에 이루어지지만, 할당은 런타임에 실행됨.

```js
console.log(score) // undefined

var score;
score = 80;

console.log(score) // 80
```

1. 호이스팅으로 `score` 변수가 선언되고 `undefind`가 할당됨.
2. `score`에 `80`이 재할당됨.
- 이때 `score`의 메모리 공간에서 `undefind`를 지우고 `80`을 새로 넣는 것이 아니라, `undefind`는 그대로 두고, `80`을 새로운 공간에 저정하는 방식으로 동작함.

## 4.6 값의 재할당

- 재할당은 이미 값이 할당되어 있는 변수에 다른 값을 다시 할당하는 것을 말한다.

```js
var score = 80;
score = 90;
```

- `var` 키워드로 선언한 변수에는 새로운 값을 재할당할 수 있다.
- 자바스크립트에서는 모든 변수가 선언될 때 `undefind`로 초기화되기 때문에 엄밀히 말해 모든 할당은 재할당이다.
- 재할당이 불가능한 변수를 **상수**라고 한다.
- 재할당 과정에서는 기존 값을 메모리에 남겨두고 새로운 메모리 공간에 재할당할 값을 저장한다.
- 이 과정에서 이전 값들은 변수와의 연결이 끊어지게 되고, 참조할 수도 없게 된다.
- 자바스크립트에서는 **가비지 컬랙터**가 이런 불필요한 값들을 메모리에서 자동으로 해제시킨다.
- 단, 메모리가 해제되는 시기는 예측할 수 없다.

> **매니지드 언어와 언매니지드 언어**
>
> C 같은 언매니지드 언어는 개발자가 명시적으로 메모리를 할당하고 해제할 수 있다. 때문에 성능 확보가 가능하지만 치명적 오류가 발생할 수 있다.
>
> 반면 자바스크립트는 매니지드 언어로, 언어 수준에서 메모리를 관리한다. 따라서 생산성 확보가 가능하나 성능에서의 손실이 따른다.

## 4.7 식별자 네이밍 규칙

- 식별자는 다음 규칙을 지켜야 한다.
  1. 식별자는 문자, 숫자, 언더스코어, 달러를 포함할 수 있다.
  2. 식별자는 숫자로 시작할 수 없다.
  3. 예약어는 식별자로 사용할 수 없다.